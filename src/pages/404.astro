---
import Layout from "../layouts/Layout.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title="404" description={t("404.description")}>
    <div
        class="flex flex-col items-center justify-center min-h-[65vh] py-16 px-4 text-center mt-8"
    >
        <!-- Technical badge -->
        <div
            class="mb-8 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-zinc-100/80 dark:bg-zinc-800/80 backdrop-blur-md border border-zinc-200 dark:border-zinc-700 shadow-sm animate-fade-in text-xs font-mono font-medium text-zinc-600 dark:text-zinc-400"
        >
            <span class="relative flex h-2 w-2">
                <span
                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"
                ></span>
                <span
                    class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"
                ></span>
            </span>
            STATUS: 404_NOT_FOUND
        </div>

        <!-- 404 Text with Gradient Animation -->
        <h1
            class="text-[8rem] md:text-[12rem] font-black leading-none tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 via-zinc-800 to-emerald-500 dark:from-emerald-400 dark:via-zinc-100 dark:to-emerald-400 select-none animate-gradient-text drop-shadow-sm"
        >
            404
        </h1>

        <!-- Elegant Separator -->
        <div
            class="w-16 h-1.5 bg-zinc-200 dark:bg-zinc-800 rounded-full my-8 animate-fade-in delay-200 overflow-hidden relative"
        >
            <div
                class="absolute inset-0 bg-emerald-500 w-1/2 rounded-full animate-bounce-horizontal"
            >
            </div>
        </div>

        <!-- Main text -->
        <h2
            class="text-3xl md:text-5xl font-bold text-zinc-900 dark:text-zinc-100 tracking-tight mb-6 animate-slide-up delay-200"
        >
            {t("404.title")}
        </h2>

        <p
            class="text-zinc-600 dark:text-zinc-400 text-lg max-w-lg mx-auto leading-relaxed mb-12 animate-slide-up delay-300"
        >
            {t("404.description")}
        </p>

        <!-- Clean & Padded Actions without overlap -->
        <div
            class="flex flex-col sm:flex-row items-center justify-center gap-4 animate-fade-in delay-500 mt-6"
        >
            <a
                href={lang === "es" ? "/" : "/en"}
                class="group inline-flex items-center justify-center gap-2 px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-xl transition-all hover:scale-105 active:scale-95 shadow-md shadow-emerald-500/25"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="transition-transform duration-300 group-hover:scale-110"
                >
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                    ></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span
                    class="uppercase tracking-widest text-xs whitespace-nowrap"
                    >{t("404.back")}</span
                >
            </a>

            <button
                onclick="history.back()"
                class="group inline-flex items-center justify-center gap-2 px-6 py-3 text-zinc-500 dark:text-zinc-400 font-bold hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors uppercase tracking-widest text-xs border border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700 rounded-xl"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="transition-transform group-hover:-translate-x-1"
                >
                    <path d="m15 18-6-6 6-6"></path>
                </svg>
                <span class="whitespace-nowrap"
                    >{lang === "es" ? "PÃ¡gina anterior" : "Previous page"}</span
                >
            </button>
        </div>
    </div>
</Layout>

<style>
    @keyframes slide-up {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    @keyframes fade-in {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @keyframes gradient-x {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    @keyframes bounce-x {
        0%,
        100% {
            transform: translateX(-50%);
        }
        50% {
            transform: translateX(150%);
        }
    }

    .animate-slide-up {
        opacity: 0;
        animation: slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    .animate-fade-in {
        opacity: 0;
        animation: fade-in 1s ease-out forwards;
    }
    .animate-gradient-text {
        opacity: 0;
        background-size: 200% auto;
        animation: slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards,
            gradient-x 4s linear infinite;
    }
    .animate-bounce-horizontal {
        animation: bounce-x 2s ease-in-out infinite;
    }

    .delay-200 {
        animation-delay: 200ms;
    }
    .delay-300 {
        animation-delay: 300ms;
    }
    .delay-500 {
        animation-delay: 500ms;
    }
</style>
